var blind=function(options){this.autoPlay=options.autoPlay&&true;this.arr=options.arr;this.bladeNum=options.bladeNum||5;this.mouseUp=options.mouseUp||false;this.animationSpeed=options.animationSpeed||500;this.bladeTime=options.bladeTime||100;this.animationTime=options.animationTime||2000;this.dots=options.dots&&true;this.blindEvent;this.callback=options.callback||false;let than=this;let blindWidth;let blindPosition=0;let blindAnimation=false;let clickWork=false;let clearGlobal;this.css=function(){let dotsHtml='',bladeHtml='';for(let i=0;i<this.bladeNum;i++){bladeHtml+=`<div class="blade"><div class="blade-change"></div></div>`}for(let i=0;i<this.arr.length;i++){dotsHtml+=`<div data-num="${i}"><span></span></div>`}$(dotsHtml).appendTo('.dots-box');$(bladeHtml).appendTo('.blind-pic');$('.dots-box').children('div:eq(0)').addClass('active');this.blindEvent=$('.blind-pic').children('div.blade');this.setBlindWidth();this.resizeWindowsSize();this.setA(0)};this.setBg=function(num){for(let i=0;i<this.bladeNum;i++){this.blindEvent.eq(i).children('div.blade-change').css('background-image','url('+this.arr[num][0]+')')}};this.setA=function(num){$('.blind-url').attr({'title':this.arr[num][1],'href':this.arr[num][2]});$('.blind-url').css('background-image','url('+this.arr[num][0]+')')};this.setBlindWidth=function(){let allWidth=$('#blindSwiper').width();blindWidth=allWidth/this.bladeNum;this.blindEvent.children('div.blade-change').css('width',allWidth);for(let i=0;i<this.bladeNum;i++){this.blindEvent.eq(i).css({'left':''+(blindWidth*i)+'px'});this.blindEvent.children('div.blade-change:eq('+i+')').css('left',-(blindWidth*i)+'px')}};this.resizeWindowsSize=function(){$(window).resize(function(){than.setBlindWidth()})};this.animationStart=function(num){blindAnimation=true;let blindPic=$('.blind-pic');blindPic.css('z-index','3');this.setBg(num);for(let i=0;i<this.bladeNum;i++){this.blindEvent.eq(i).css({'transition':'width '+this.animationSpeed+'ms ease '+(i*this.bladeTime)+'ms'})}setTimeout(function(){than.blindEvent.css({'width':''+blindWidth+'px'})},10);this.dotsPosition(num);if(this.callback){this.callback(num)}let lastBlindPic=this.blindEvent.eq((this.bladeNum-1));let lastTime=this.bladeTime*this.bladeNum+this.animationSpeed;setTimeout(function(){than.blindEvent.css({'transition':'none'});than.setA(num);blindPic.css('z-index','1');than.blindEvent.css({'width':'0px'});blindAnimation=false;if(clickWork&&than.autoPlay){clickWork=false;than.autoPlayFun()}},lastTime)};this.switchBlade=function(bool){if(!blindAnimation){clickWork=true;window.clearTimeout(clearGlobal);this.animationStart(than.countPosition(bool))}};this.prev=function(){than.switchBlade(false)};this.next=function(){than.switchBlade(true)};this.dots=function(num){than.switchBlade(num)};this.buttonClickFun=function(){$('#blindPrev').click(function(){than.prev()});$('#blindNext').click(function(){than.next()});$('.dots-box').children('div').click(function(){than.dots($(this).data('num'))})};this.dotsPosition=function(num){if(this.dots){$('.dots-box').children('div').eq(num).addClass('active').siblings('div').removeClass('active')}};this.countPosition=function(e){if(typeof e=='boolean'){if(e){if(blindPosition>=(this.arr.length-1)){blindPosition=-1}blindPosition++}else{if(blindPosition<=0){blindPosition=this.arr.length}blindPosition--}}else{blindPosition=e}return blindPosition};this.mouseFun=function(){if(this.mouseUp){$('#blindSwiper').mouseenter(function(){if(than.autoPlay){window.clearTimeout(clearGlobal)}}).mouseleave(function(){if(than.autoPlay){than.autoPlayFun()}})}};this.autoPlayFun=function(){if(this.autoPlay){(function autoPlayFunN(){clearGlobal=window.setTimeout(function(){than.animationStart(than.countPosition(true));autoPlayFunN()},than.animationTime)})()}};this.loadImagesFun=function(arr,fun){};this.init=function(){if(this.arr.length<=2){console.log('数组长度不够，请确认后再次运行！');return}for(let i=0;i<this.arr.length;i++){if(this.arr[i][0]==''){console.log('数组第'+(i+1)+'段有空白图片！');return}if(this.arr[i].length!==3){console.log('数组不符合规范，请检查后重试！');return}}if(!this.dots){$('#blind-control').remove()}this.css();this.autoPlayFun();this.buttonClickFun();this.mouseFun()};this.init()}